import{s as o,a as p}from"./index-luQwq3oY.js";async function c({whatsappNumber:e,receiptUrl:s}){try{const{data:t}=await o.from("settings").select("whatsapp_api_key, whatsapp_template").single();if(!(t!=null&&t.whatsapp_api_key)||!(t!=null&&t.whatsapp_template))throw new Error("WhatsApp API key or template not configured");const a=e.startsWith("+")?e.substring(1):e.startsWith("0")?"62"+e.substring(1):e,r=t.whatsapp_template.replace("{{receipt_url}}",s);return{success:!0,response:(await p.post("https://api.whatsapp.com/send",{phone:a,text:r},{headers:{Authorization:`Bearer ${t.whatsapp_api_key}`}})).data}}catch(t){throw console.error("Error sending WhatsApp message:",t),t}}export{c as sendReceipt};
